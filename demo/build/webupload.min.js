!function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Webupload=void 0;var i=n(1),r=o(i);e.Webupload=r.default},function(t,e,n){"use strict";function o(t){if(this.options={el:"",url:"",limit:"9",ext:["png","jpg"],data:{},success:function(){},loadend:function(){},error:function(){}},this.options=r.extend(this.options,t),this.el=document.getElementById(this.options.el),this.imgList=null,this.id="",!this.el)throw new Error("未指定el.");this._init()}Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(2);n(3);var a=0;o.prototype={_init:function(){this._correctExt(),this._generateID(),this._renderDOM(),this.el=document.getElementById(this.options.el),this.imgList=document.getElementById(this.id).querySelector(".webupload-list"),this._watch()},_renderDOM:function(){var t=document.createElement("ul");t.className="webupload-list",this.el.outerHTML='<div class="webupload" id="'+this.id+'">\t            <div class="webupload-handle">'+this.el.outerHTML+"</div>"+t.outerHTML+"</div>"},_generateID:function(){a++,this.id="webupload"+a},_correctExt:function(){for(var t=this.options.ext,e=t.length,n=0;n<e;n++)if("jpg"==t[n]){t[n]="jpeg";break}},_loadend:function(t,e){var n=document.createElement("li"),o=document.createElement("img");o.src=t,n.appendChild(o),this.imgList.appendChild(n),this.options.loadend(t,e)},_watch:function(){var t=this,e=t.options.ext.length>0;this.el.addEventListener("change",function(n){var o,i,r=0,a=this.files.length;if(this.files.length>t.options.limit)return void t.options.error("最多上传"+t.options.limit+"个文件");for(;r<a;r++){var s=new FormData;if(i=this.files[r],e&&!t._filterType(this.files[r]))break;window.FileReader&&(o=new FileReader,o.onloadend=function(e){t._loadend(e.target.result,i.name)},o.readAsDataURL(i)),s.append("images",i,i.name),t._upload(s)}},!1)},_filterType:function(t){for(var e=this.options.ext,n=e.length,o=!1,i=0;i<n;i++)if(t.type.indexOf(e[i])>-1){o=!0;break}return o||this.options.error("文件格式不正确"),o},_upload:function(t){this._setExtraData(t);var e=new XMLHttpRequest;e.open("POST",this.options.url,!0),e.setRequestHeader("Cache-Control","no-cache"),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.upload.onprogress=this._onprogress,t.fake?(e.setRequestHeader("Content-Type","multipart/form-data; boundary="+t.boundary),e.sendAsBinary(t.toString())):e.send(t)},_onprogress:function(t){event.lengthComputable&&console.log(event.loaded/event.total*100+"%")},_setExtraData:function(t){var e=this.options.data;if("object"==("undefined"==typeof e?"undefined":i(e))){var n;for(n in e)t.append(n,e[n])}}},window.Webupload=o,e.default=o},function(t,e){"use strict";e.extend=function(t){for(var e,n=Array.prototype.slice.call(arguments,1),o=0;e=n[o];o++)if(e)for(var i in e)t[i]=e[i];return t},e.ajax=function(t){function e(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject){if("string"!=typeof arguments.callee.activeXString)for(var t=["MSXML2.XMLHttp.6.0","MSXML2.XMLHttp.3.0","MSXML2.XMLHttp"],e=0,n=t.length;e<n;e++)try{var o=new ActiveXObject(t[e]);return arguments.callee.activeXString=t[e],o}catch(t){}return new ActiveXObject(arguments.callee.activeXString)}throw new Error("NO XHR object available.")}t.error=t.error|function(){};var n={},o=function(t,e){n[t.toLowerCase()]=[t,e]};o("Content-Type",t.contentType||"application/x-www-form-urlencoded; charset=UTF-8");var i=e();i.onreadystatechange=function(){4==i.readyState&&(i.status>=200&&i.status<300||304==i.status?t.success(i.responseText):t.error(i.status))},i.open(t.type,t.url,!0);for(name in n)i.setRequestHeader.apply(i,n[name]);"post"==t.type?i.send(t.data):i.send(null)}},function(t,e){"use strict";!function(t){function e(){this.fake=!0,this.boundary="--------FormData"+Math.random(),this._fields=[]}t.FormData||(e.prototype.append=function(t,e){this._fields.push([t,e])},e.prototype.toString=function(){var t=this.boundary,e="";return this._fields.forEach(function(n){if(e+="--"+t+"\r\n",n[1].name){var o=n[1];e+='Content-Disposition: form-data; name="'+n[0]+'"; filename="'+o.name+'"\r\n',e+="Content-Type: "+o.type+"\r\n\r\n",e+=o.getAsBinary()+"\r\n"}else e+='Content-Disposition: form-data; name="'+n[0]+'";\r\n\r\n',e+=n[1]+"\r\n"}),e+="--"+t+"--"},t.FormData=e)}(window)}]);